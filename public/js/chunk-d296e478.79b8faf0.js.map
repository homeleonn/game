{"version":3,"sources":["webpack:///./src/js/components/hunt/TheHunting.vue?ecc2","webpack:///./src/js/components/hunt/TheHunting.vue","webpack:///./src/js/components/hunt/TheHunting.vue?e537"],"names":["class","title","src","monsters","length","monster","key","name","fight","level","image","attack","id","inject","emits","data","created","this","apiSubscribe","locMonsters","action","monsterAttacked","monsterId","forEach","m","killMonster","filter","spawnMonster","push","beforeUnmount","mounted","api","doAction","methods","res","$emit","$store","state","user","commit","render"],"mappings":"2IAAA,W,sECCMA,MAAM,W,EACV,eAA6B,MAAzBA,MAAM,UAAS,SAAK,G,SACnBA,MAAM,gB,GAEJA,MAAM,Y,SAELA,MAAM,kBAAkBC,MAAM,S,EAA6B,eAAuC,OAAlCC,IAAI,+BAA6B,S,GACjGF,MAAM,mB,YAOb,eAA2D,MAAvDA,MAAM,UAAS,uCAAmC,G,gDAdxD,eAgBM,MAhBN,EAgBM,CAfL,EACgC,EAAAG,SAASC,Q,iBAAzC,eAUM,MAVN,EAUM,E,mBATL,eAQM,2BARqC,EAAAD,UAAQ,SAAnBE,G,wBAAhC,eAQM,OARDL,MAAM,cAA2CM,IAAKD,G,CAC1D,eAA8C,MAA9C,EAA8C,eAArBA,EAAQE,MAAI,GACrC,eAIM,YAH4CF,EAAQG,O,iBAAzD,eAA6G,MAA7G,EAA6G,CAA7C,K,sBAChE,eAAsD,MAAtD,EAAsD,eAAtBH,EAAQI,OAAK,GAC7C,eAAuC,OAAjCP,IAAG,WAAeG,EAAQK,O,kBAEjC,eAAoD,UAA3C,QAAK,mBAAE,EAAAC,OAAON,EAAQO,MAAK,UAAO,oB,2BAG7C,eAEM,SADL,O,oCAQY,GACdC,OAAQ,CACP,MACA,gBAGDC,MAAO,CAAC,cAERC,KARc,WASb,MAAO,CACNZ,SAAU,KAIZa,QAdc,WAcJ,WACTC,KAAKC,aAAa,CACjBC,YAAa,SAAChB,GAAe,EAAKA,SAAWA,GAC7CK,MAAO,SAACY,KACRC,gBAAiB,SAACC,GACZ,EAAKnB,SAASC,QACnB,EAAKD,SAASoB,SAAQ,SAAAC,GACjBA,EAAEZ,IAAMU,IACZE,EAAEhB,OAAQ,OAGZiB,YAAa,SAACH,GAAgB,EAAKnB,SAAW,EAAKA,SAASuB,QAAO,SAAAF,GAAA,OAAKA,EAAEZ,IAAMU,MAChFK,aAAc,SAACtB,GAAc,EAAKF,SAASyB,KAAKvB,OAIlDwB,cA9Bc,aAkCdC,QAlCc,WAmCbb,KAAKc,IAAIC,SAAS,mBAGnBC,QAAS,CACRtB,OADQ,SACDW,GAAW,WACjBL,KAAKc,IAAIC,SAAS,gBAAiBV,GAAW,SAAAY,GACxC,eAAQA,KACb,EAAKC,MAAM,aAAc,cACzB,EAAKC,OAAOC,MAAMC,KAAK9B,MAAQ,EAC/B,EAAK4B,OAAOG,OAAO,0B,UC9DvB,EAAOC,OAASA,EAED","file":"js/chunk-d296e478.79b8faf0.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheHunting.vue?vue&type=style&index=0&id=9547e9a2&lang=scss\"","<template>\n\t<div class=\"hunting\">\n\t\t<h1 class=\"center\">Охота</h1>\n\t\t<div class=\"monsters row\" v-if=\"monsters.length\">\n\t\t\t<div class=\"monster row\" v-for=\"monster in monsters\" :key=\"monster\">\n\t\t\t\t<div class=\"center b\">{{ monster.name }}</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"mark fight-mark\" title=\"В бою\" v-if=\"monster.fight\"><img src=\"/img/tendencies/neutral.gif\"></div>\n\t\t\t\t\t<div class=\"mark level-mark\">{{ monster.level }}</div>\n\t\t\t\t\t<img :src=\"'img/npc/' + monster.image\">\n\t\t\t\t</div>\n\t\t\t\t<button @click=\"attack(monster.id)\">Напасть</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else>\n\t\t\t<h2 class=\"center\">Живых монстров в данной локации нет</h2>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { isAllow } from '@/js/common';\n\nexport default {\n\tinject: [\n\t\t'api',\n\t\t'apiSubscribe'\n\t],\n\n\temits: ['setCurComp'],\n\n\tdata() {\n\t\treturn {\n\t\t\tmonsters: []\n\t\t}\n\t},\n\n\tcreated() {\n\t\tthis.apiSubscribe({\n\t\t\tlocMonsters: (monsters) => { this.monsters = monsters },\n\t\t\tfight: (action) => { },\n\t\t\tmonsterAttacked: (monsterId) => {\n\t\t\t\tif (!this.monsters.length) return;\n\t\t\t\tthis.monsters.forEach(m => {\n\t\t\t\t\tif (m.id != monsterId) return;\n\t\t\t\t\tm.fight = true;\n\t\t\t\t});\n\t\t\t},\n\t\t\tkillMonster: (monsterId) => { this.monsters = this.monsters.filter(m => m.id != monsterId) },\n\t\t\tspawnMonster: (monster) => { this.monsters.push(monster) },\n\t\t});\n\t},\n\n\tbeforeUnmount() {\n\t\t// ['locMonsters', 'fight', 'monsterAttacked', 'killMonster', 'spawnMonster'].forEach(e => this.api.unsubscribe(e));\n\t},\n\n\tmounted() {\n\t\tthis.api.doAction('getLocMonsters');\n\t},\n\n\tmethods: {\n\t\tattack(monsterId) {\n\t\t\tthis.api.doAction('attackMonster', monsterId, res => {\n\t\t\t\tif (!isAllow(res)) return;\n\t\t\t\tthis.$emit('setCurComp', 'GameFight2');\n\t\t\t\tthis.$store.state.user.fight = 1;\n\t\t\t\tthis.$store.commit('CLEAR_FIGHT_LOG');\n\t\t\t});\n\t\t},\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n\n.monsters {\n\tjustify-content: center;\n\n\t.monster {\n\t\twidth: 100px;\n\t\tmargin: 10px 20px;\n\t\tposition: relative;\n\n\t\t.mark {\n\t\t\tposition: absolute;\n\t\t\ttop: 8px;\n\t\t\tborder-radius: 50%;\n\t\t\tpadding: 5px 8px;\n\t\t\tcursor: pointer;\n\t\t\tborder: 3px gold solid;\n\t\t}\n\n\t\t.fight-mark {\n\t\t\tright: -10px;\n\t\t\tbackground: #fb8662;\n\t\t}\n\n\t\t.level-mark {\n\t\t\tpadding: 2px 9px;\n\t\t\tfont-weight: bold;\n\t\t\tleft: -10px;\n\t\t\tbackground: #eee;\n\t\t}\n\t}\n}\n</style>\n","import { render } from \"./TheHunting.vue?vue&type=template&id=9547e9a2\"\nimport script from \"./TheHunting.vue?vue&type=script&lang=js\"\nexport * from \"./TheHunting.vue?vue&type=script&lang=js\"\n\nimport \"./TheHunting.vue?vue&type=style&index=0&id=9547e9a2&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}